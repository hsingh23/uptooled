<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Privacy First Tools</title>
  <meta name="description" content="A curated gallery of free, privacy-focused web-based utilities. Explore tools for image editing, timeline creation, and more, all designed to work in your browser without compromising your data.">
  <meta name="keywords" content="privacy tools, online utilities, free tools, image editor, timeline generator, secure apps, browser tools">
  <link rel="canonical" href="https://tools.privacyfirstapps.org/">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tools.privacyfirstapps.org/">
  <meta property="og:title" content="Privacy First Tools - Free Online Utilities">
  <meta property="og:description" content="A curated gallery of free, privacy-focused web-based utilities. Explore tools for image editing, timeline creation, and more.">
  <meta property="og:image" content="https://placehold.co/1200x630/1e1e1e/e0e0e0?text=Privacy+First\nTools">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://tools.privacyfirstapps.org/">
  <meta property="twitter:title" content="Privacy First Tools - Free Online Utilities">
  <meta property="twitter:description" content="A curated gallery of free, privacy-focused web-based utilities. Explore tools for image editing, timeline creation, and more.">
  <meta property="twitter:image" content="https://placehold.co/1200x630/1e1e1e/e0e0e0?text=Privacy+First\nTools">

  <link rel="preload" href="tools.json" as="fetch" crossorigin>
  <link rel="preload" href="external-sites.json" as="fetch" crossorigin>
  <link rel="preload" href="index.js" as="script">
  <script src="https://unpkg.com/dexie@latest/dist/dexie.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <style>
    :root {
      --font-size: 14px;
      --spacing: 0.75rem;
    }
    html { font-size: var(--font-size); }
    html, body { height: 100%; }
    body {
      margin: 0;
      display: flex;
      overflow: hidden; /* Prevents whole-page scroll */
    }
    aside {
      width: 250px;
      flex-shrink: 0;
      border-right: 1px solid var(--card-border-color);
      padding: var(--spacing);
      display: flex;
      flex-direction: column;
      overflow-y: auto; /* Independent scrolling */
    }
    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow-y: auto; /* Independent scrolling */
      background-color: var(--background-color);
    }
    #grid-view {
      display: grid;
      gap: var(--spacing);
      padding: var(--spacing);
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }
    article.tool-card {
      padding: 0;
      --card-padding: 0;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      overflow: hidden;
      margin-bottom: 0;
      background-color: var(--card-background-color);
    }
    article.tool-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--card-box-shadow);
    }
    .card-window {
        border: 1px solid var(--card-border-color);
        border-radius: var(--border-radius);
        padding: 0;
        box-shadow: none;
    }
    .card-window-header {
        height: 25px;
        background: var(--muted-bg-color);
        border-bottom: 1px solid var(--card-border-color);
        display: flex; align-items: center; padding: 0 8px; gap: 5px;
    }
    .card-window-header span { display: block; width: 10px; height: 10px; border-radius: 50%; background: var(--muted-border-color); }
    .card-window-header span:nth-child(1) { background-color: #ff5f56; }
    .card-window-header span:nth-child(2) { background-color: #ffbd2e; }
    .card-window-header span:nth-child(3) { background-color: #27c93f; }
    .card-window-content { height: 200px; }
    .card-frame { width: 100%; height: 100%; border: 0; object-fit: cover; background-color: var(--muted-border-color); }
    .tool-card-body { padding: var(--spacing); padding-top: calc(var(--spacing)/2); }
    .tool-card-body h5 { margin-bottom: calc(var(--spacing)/4); font-size: 1.1rem; }
    .tool-card-body p { color: var(--muted-color); font-size: 0.9em; line-height: 1.4; margin-bottom: 0; }
    
    #viewer-container { display: none; flex: 1; flex-direction: column; overflow: hidden; }
    #viewer-controls {
        padding: calc(var(--spacing) / 3) var(--spacing);
        border-bottom: 1px solid var(--card-border-color);
        display: flex; align-items: center; gap: 0.75rem; 
        background-color: var(--card-background-color);
        flex-shrink: 0;
    }
    .icon-btn {
        background: none; border: none; padding: 0.25rem; cursor: pointer;
        color: var(--color); opacity: 0.7;
    }
    .icon-btn:hover { opacity: 1; color: var(--primary); }
    .icon-btn svg { width: 20px; height: 20px; }

    #viewer-frame-container { flex: 1; overflow: hidden; }
    #tool-frame, #viewer-placeholder { width: 100%; height: 100%; border: 0; }
    
    #tool-info {
        padding: var(--spacing);
        border-top: 1px solid var(--card-border-color);
        background-color: var(--card-background-color);
        overflow-y: auto; max-height: 250px; flex-shrink: 0;
    }
    #tool-info h5 { margin-bottom: 0.25rem; }
    #tool-info p, #tool-info small { margin-bottom: 0.5rem; display: block; }

    #related-tools-container h6 { font-size: 1rem; margin-bottom: 0.5rem; color: var(--color); }
    #related-tools-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing); }
    .related-tool-card { display: flex; align-items: center; justify-content: space-between; gap: var(--spacing);
        padding: 0.5rem; border-radius: var(--border-radius); border: 1px solid var(--card-border-color);
        background-color: var(--background-color); cursor: pointer; transition: background-color 0.2s;
    }
    .related-tool-card:hover { background-color: var(--muted-bg-color); }
    .related-tool-card-info { flex: 1; }
    .related-tool-card-info strong { font-size: 0.9em; }
    .related-tool-card-img { width: 80px; height: 50px; border-radius: calc(var(--border-radius)/2); object-fit: cover; background-color: var(--muted-border-color); }

    #tool-list { padding-left: 0; list-style: none; margin: 0; }
    #tool-list a { text-decoration: none; display: block; padding: 0.1rem 0; font-size: 0.95em; }
    #theme-toggle { margin-top: auto; padding-top: var(--spacing); }

    /* Command Palette Styles */
    #commandPalette[open] { padding: 0; max-width: 600px; border-radius: var(--border-radius); }
    #commandPalette article { padding: 0; }
    #commandPalette-search { margin: 0; border-radius: 0; border: none; border-bottom: 1px solid var(--card-border-color); }
    #commandPalette-results { max-height: 40vh; overflow-y: auto; padding: 0; }
    .palette-result { display: block; padding: 0.5rem var(--spacing); text-decoration: none; border-bottom: 1px solid var(--card-border-color); }
    .palette-result:last-child { border-bottom: none; }
    .palette-result[aria-selected="true"] { background-color: var(--primary); color: var(--primary-inverse); }

    /* Dark Theme Improvements */
    [data-theme="dark"] {
        --background-color: #121212;
        --color: #e0e0e0;
        --card-background-color: #1e1e1e;
        --card-border-color: #333;
        --muted-bg-color: #2a2a2a;
        --muted-color: #a0a0a0;
        --primary: #58a6ff;
        --primary-inverse: #0d1117;
        --mark-background: rgba(255, 229, 100, 0.2);
        --mark-color: #e0e0e0;
        --card-box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    [data-theme="dark"] .related-tool-card { background-color: var(--card-background-color); }
    [data-theme="dark"] .related-tool-card:hover { background-color: var(--muted-bg-color); }
    [data-theme="dark"] .palette-result[aria-selected="true"] small { color: #ccc; }


    @media (max-width: 768px) {
      body { flex-direction: column; }
      aside { width: 100%; border-right: none; border-bottom: 1px solid var(--card-border-color); height: auto; max-height: 35vh; }
      #theme-toggle { margin-top: var(--spacing); }
    }
  </style>
</head>
<body>
  <aside>
    <label for="search">
        <input type="search" id="search" name="search" placeholder="Filter tools...">
    </label>
    <ul id="tool-list"></ul>
    <button id="theme-toggle" class="secondary outline">Toggle Theme</button>
  </aside>

  <main id="main-content">
    <div id="grid-view"></div>

    <div id="viewer-container">
        <div id="viewer-controls">
            <button id="back-button" class="icon-btn" title="Back to Grid">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" /></svg>
            </button>
            <span id="viewer-title" class="font-bold text-ellipsis overflow-hidden whitespace-nowrap"></span>
            <div style="margin-left: auto;"></div>
            <button id="toggle-info" class="icon-btn" title="Toggle Info Panel">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd" /></svg>
            </button>
            <button id="edit-file" class="icon-btn" title="Edit File" style="display:none;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z" /><path d="M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z" /></svg>
            </button>
        </div>
        <div id="viewer-frame-container">
            <img id="viewer-placeholder" style="display:none;"/>
            <iframe id="tool-frame" style="display:none;"></iframe>
        </div>
        <div id="tool-info">
            <h5 id="tool-title"></h5>
            <p id="tool-description"></p>
            <small id="tool-keywords"></small>
            <div id="related-tools-container" style="display: none; margin-top: 1rem;">
                <h6>Related Tools</h6>
                <div id="related-tools-grid"></div>
            </div>
        </div>
    </div>
  </main>

  <dialog id="commandPalette">
    <article>
        <input type="search" id="commandPalette-search" placeholder="Open tool...">
        <div id="commandPalette-results"></div>
    </article>
  </dialog>

  <script src="index.js" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const themeToggle = document.getElementById('theme-toggle');
      if (themeToggle) {
        const htmlEl = document.documentElement;
        const savedTheme = localStorage.getItem('theme') || 'light';
        htmlEl.setAttribute('data-theme', savedTheme);

        themeToggle.addEventListener('click', () => {
          const currentTheme = htmlEl.getAttribute('data-theme');
          const newTheme = currentTheme === 'light' ? 'dark' : 'light';
          htmlEl.setAttribute('data-theme', newTheme);
          localStorage.setItem('theme', newTheme);
        });
      }
    });
  </script>
</body>
</html>
